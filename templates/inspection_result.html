{% extends 'layout.html' %}
{% block content %}
<div class="home">
    <h1>Analyze</h1>
    <p>This is where the bulk of the work for an inspection will be done. On this page, it'll show an inspection (so all the visual stuff).</p>
    <p>Inspection ID: {{ inspection.id }}</p>
    <p>Inspection aircraft ID: {{ inspection.aircraft_id }}</p>
</div>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="{{ url_for('static', filename='css/inspection_results.css') }}">

<div class="just-padding" style="display:inline-block" align="left">
    <div id="divisionPlanImage">
        <img src={{url_for('static', filename='verticalplan1_737.PNG')}} align ="left" id="divisionImage" style="width:315px ; height:463px ; position:absolute ; left:5px ; top:75px" />
    </div>

    <div class="list-group list-group-root well" style="width:250px ; display:inline-block">
        <script>
            $(function () {

                $('.list-group-item').on('click', function () {
                    $('.glyphicon', this)
                        .toggleClass('glyphicon-chevron-right')
                        .toggleClass('glyphicon-chevron-down');
                });

            });
        </script>
        <a href="#item-1" class="list-group-item" data-toggle="collapse">
            <i class="glyphicon glyphicon-chevron-right"></i>Fuselage
        </a>
        <div class="list-group collapse" id="item-1">
            <a href="#item-1-1" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Stringer Set 1 <span class="badge badge-danger" style="background-color:darkred; color:white">1</span>
            </a>
            <div class="list-group collapse" id="item-1-1">

                <a href="#" class="list-group-item" onclick="showImage()" id="item-1-1-1">Item 1.1.1 ({{inspection.ai_confidence}}%)</a>
                <a href="#" class="list-group-item">Item 1.1.2 (88.113%)</a>
                <a href="#" class="list-group-item" style="background-color:darkred ; color:white">Item 1.1.3 (67.748%)</a>
            </div>
            <script>
                function showImage() {
                    var x = document.getElementById("imageAndButtons")
                    if (x.style.display === "none") {
                        x.style.display = "inline-block";
                    } else {
                        x.style.display = "none";
                    }
                }
            </script>
            <a href="#item-1-2" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Stringer Set 2
            </a>
            <div class="list-group collapse" id="item-1-2">
                <a href="#" class="list-group-item">Item 1.2.1</a>
                <a href="#" class="list-group-item">Item 1.2.2</a>
                <a href="#" class="list-group-item">Item 1.2.3</a>
            </div>

            <a href="#item-1-3" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Stringer Set 3
            </a>
            <div class="list-group collapse" id="item-1-3">
                <a href="#" class="list-group-item">Item 1.3.1</a>
                <a href="#" class="list-group-item">Item 1.3.2</a>
                <a href="#" class="list-group-item">Item 1.3.3</a>
            </div>

        </div>

        <a href="#item-2" class="list-group-item" data-toggle="collapse">
            <i class="glyphicon glyphicon-chevron-right"></i>Left Wing
        </a>
        <div class="list-group collapse" id="item-2">

            <a href="#item-2-1" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Ribs & Spars Set 1
            </a>
            <div class="list-group collapse" id="item-2-1">
                <a href="#" class="list-group-item">Item 2.1.1</a>
                <a href="#" class="list-group-item">Item 2.1.2</a>
                <a href="#" class="list-group-item">Item 2.1.3</a>
            </div>

            <a href="#item-2-2" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Ribs and Spars Set 2
            </a>
            <div class="list-group collapse" id="item-2-2">
                <a href="#" class="list-group-item">Item 2.2.1</a>
                <a href="#" class="list-group-item">Item 2.2.2</a>
                <a href="#" class="list-group-item">Item 2.2.3</a>
            </div>

            <a href="#item-2-3" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Ribs and Spars Set 3
            </a>
            <div class="list-group collapse" id="item-2-3">
                <a href="#" class="list-group-item">Item 2.3.1</a>
                <a href="#" class="list-group-item">Item 2.3.2</a>
                <a href="#" class="list-group-item">Item 2.3.3</a>
            </div>

        </div>


        <a href="#item-3" class="list-group-item" data-toggle="collapse">
            <i class="glyphicon glyphicon-chevron-right"></i>Right Wing
        </a>
        <div class="list-group collapse" id="item-3">

            <a href="#item-3-1" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Ribs and Spars Set 1
            </a>
            <div class="list-group collapse" id="item-3-1">
                <a href="#" class="list-group-item">Item 3.1.1</a>
                <a href="#" class="list-group-item">Item 3.1.2</a>
                <a href="#" class="list-group-item">Item 3.1.3</a>
            </div>

            <a href="#item-3-2" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Ribs and Spars Set 2
            </a>
            <div class="list-group collapse" id="item-3-2">
                <a href="#" class="list-group-item">Item 3.2.1</a>
                <a href="#" class="list-group-item">Item 3.2.2</a>
                <a href="#" class="list-group-item">Item 3.2.3</a>
            </div>

            <a href="#item-3-3" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Ribs and Spars Set 3
            </a>
            <div class="list-group collapse" id="item-3-3">
                <a href="#" class="list-group-item">Item 3.3.1</a>
                <a href="#" class="list-group-item">Item 3.3.2</a>
                <a href="#" class="list-group-item">Item 3.3.3</a>
            </div>

        </div>

        <a href="#item-4" class="list-group-item" data-toggle="collapse">
            <i class="glyphicon glyphicon-chevron-right"></i>Lower Tail
        </a>
        <div class="list-group collapse" id="item-4">

            <a href="#item-4-1" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Stringer Set 1
            </a>
            <div class="list-group collapse" id="item-4-1">
                <a href="#" class="list-group-item">Item 4.1.1</a>
                <a href="#" class="list-group-item">Item 4.1.2</a>
                <a href="#" class="list-group-item">Item 4.1.4</a>
            </div>

            <a href="#item-4-2" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Stringer Set 2
            </a>
            <div class="list-group collapse" id="item-4-2">
                <a href="#" class="list-group-item">Item 4.2.1</a>
                <a href="#" class="list-group-item">Item 4.2.2</a>
                <a href="#" class="list-group-item">Item 4.2.4</a>
            </div>

            <a href="#item-4-4" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Stringer Set 3
            </a>
            <div class="list-group collapse" id="item-4-4">
                <a href="#" class="list-group-item">Item 4.4.1</a>
                <a href="#" class="list-group-item">Item 4.4.2</a>
                <a href="#" class="list-group-item">Item 4.4.4</a>
            </div>

        </div>

        <a href="#item-5" class="list-group-item" data-toggle="collapse">
            <i class="glyphicon glyphicon-chevron-right"></i>Upper Tail
        </a>
        <div class="list-group collapse" id="item-5">

            <a href="#item-5-1" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Stringer Set 1
            </a>
            <div class="list-group collapse" id="item-5-1">
                <a href="#" class="list-group-item">Item 5.1.1</a>
                <a href="#" class="list-group-item">Item 5.1.2</a>
                <a href="#" class="list-group-item">Item 5.1.5</a>
            </div>

            <a href="#item-5-2" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Stringer Set 2
            </a>
            <div class="list-group collapse" id="item-5-2">
                <a href="#" class="list-group-item">Item 5.2.1</a>
                <a href="#" class="list-group-item">Item 5.2.2</a>
                <a href="#" class="list-group-item">Item 5.2.5</a>
            </div>

            <a href="#item-5-5" class="list-group-item" data-toggle="collapse">
                <i class="glyphicon glyphicon-chevron-right"></i>Stringer Set 3
            </a>
            <div class="list-group collapse" id="item-5-5">
                <a href="#" class="list-group-item">Item 5.5.1</a>
                <a href="#" class="list-group-item">Item 5.5.2</a>
                <a href="#" class="list-group-item">Item 5.5.5</a>
            </div>

        </div>

    </div>

    <div id="imageAndButtons" align="right" style="display:none; width:700px; text-align:center">

        <img src={{url_for('static', filename='plane_example.jpg')}} id="testImage" />
        <br>
        <button type="button" onclick="approveImage()" class="btn btn-outline-success" id="approve">Approve Section</button>
        <button type="button" onclick="rejectImage()" class="btn btn-outline-danger" id="reject" align="center">Reject Section</button>
    </div>

    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- The Close Button -->
        <span class="close">&times;</span>

        <!-- Modal Content (The Image) -->
        <img class="modal-content" id="img01">

        <!-- Modal Caption (Image Text) -->
        <div id="caption"></div>
    </div>

    <script>
        function rejectImage() {
            var x = document.getElementById("item-1-1-1")
            x.style.backgroundColor = "darkred";
            x.style.color = "white";
        }

        function approveImage() {
            var x = document.getElementById("item-1-1-1")
            x.style.backgroundColor = "darkgreen";
            x.style.color = "white";
        }

        // Get the modal
        var modal = document.getElementById("myModal");

        // Get the image and insert it inside the modal - use its "alt" text as a caption
        var img = document.getElementById("testImage");
        var modalImg = document.getElementById("img01");
        var captionText = document.getElementById("caption");
        img.onclick = function () {
            modal.style.display = "block";
            modalImg.src = this.src;
            captionText.innerHTML = this.alt;
        }

        // Get the <span> element that closes the modal
        var span = document.getElementsByClassName("close")[0];

        // When the user clicks on <span> (x), close the modal
        span.onclick = function () {
            modal.style.display = "none";
        }
    </script>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
{% endblock %}