{% extends 'layout.html' %}
{% block content %}
<link rel="stylesheet" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
<div class="home">
    <h1>Analyze</h1>
    <p>This is the analysis page, where inspection work will actually be done.</p>
    <p>Essentially, during an inspection procedure, you'll get an image of some section of the plane on this page.</p>
    <p>Each image, which has been stitched together and run through a computer vision algoirthm, will have visual indicators of possible structural damage.</p>
    <p>The user of this application will be able to "APPROVE" or "DENY" each section of the plane.</p>
    <p>If a plane segment is denied, a reason will be provided, and further inspection can occur, or the plane can be grounded for repairs.</p>
</div>
<div class="home">
    <h3>Open Inspections</h3>
    <table id="inspection_table" class="cell-border compact stripe">
        <thead>
            <tr>
                <th>Inspection ID</th>
                <th>Link</th>
                <th>Date Created</th>
                <th>Deadline</th>
                <th>Aircraft ID</th>
                <th>Imaging Time</th>
                <th>Approval Status</th>
                <th>AI Confidence</th>
            </tr>
        </thead>
        <tbody>
            {% for row in data %}
            <tr>
                <td>{{ row.id }}</td>
                <td><a href='{{ url_for("mira_inspection_result", inspection_id=row.id) }}'>View Inspection</a></td>
                <td>{{ row.date_created }}</td>
                <td>{{ row.deadline }}</td>
                <td>{{ row.aircraft_id }}</td>
                <td>{{ row.imaging_time }}</td>
                {% if row.approval_status == 0 %}
                <td>PENDING</td>
                {% elif row.approval_status == 1 %}
                <td>APPROVED</td>
                {% elif row.approval_status == 2 %}
                <td>DENIED</td>
                {% endif %}
                <td>{{ row.ai_confidence }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
</div>
{% endblock %}